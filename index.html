<!doctype html>
<html lang="ja">
<head>
    <title>棋譜略記入力(仮)</title>
</head>
<body>
<h1>棋譜略記入力(仮)</h1>
<div style="display: flex; min-height: 100px;">
    <textarea autofocus id="input" style="flex: 1 1 0">例：76f 34f 22ka+ xh 65ka 52kil 83ka+で先手優勢。
22xhでは\xgが優った。</textarea>
    <div id="output" style="flex: 1 1 0; white-space: pre-wrap; border: 1px gray solid;"></div>
</div>
<h2>
    使い方
</h2>
<p>棋譜ってこんな感じですよね：</p>
<svg class="railroad-diagram" width="721.5" height="332" viewBox="0 0 721.5 332" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g transform="translate(.5 .5)">
        <g>
            <path d="M20 141v20m10 -20v20m-10 -10h20"></path>
        </g>
        <path d="M40 151h10"></path>
        <g class="comment ">
            <path d="M50 151h0"></path>
            <path d="M95 151h0"></path>
            <text x="72.5" y="156" class="comment"> 指し手 </text>
        </g>
        <path d="M95 151h10"></path>
        <g>
            <path d="M105 151h0"></path>
            <path d="M282 151h0"></path>
            <path d="M105 151h20"></path>
            <g>
                <path d="M125 151h0"></path>
                <path d="M262 151h0"></path>
                <g>
                    <path d="M125 151h0"></path>
                    <path d="M193.5 151h0"></path>
                    <path d="M125 151a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
                    <g class="terminal ">
                        <path d="M145 121h0"></path>
                        <path d="M173.5 121h0"></path>
                        <rect x="145" y="110" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="159.25" y="125">４</text>
                    </g>
                    <path d="M173.5 121a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
                    <path d="M125 151a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path>
                    <g class="terminal ">
                        <path d="M145 91h0"></path>
                        <path d="M173.5 91h0"></path>
                        <rect x="145" y="80" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="159.25" y="95">３</text>
                    </g>
                    <path d="M173.5 91a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path>
                    <path d="M125 151a10 10 0 0 0 10 -10v-70a10 10 0 0 1 10 -10"></path>
                    <g class="terminal ">
                        <path d="M145 61h0"></path>
                        <path d="M173.5 61h0"></path>
                        <rect x="145" y="50" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="159.25" y="65">２</text>
                    </g>
                    <path d="M173.5 61a10 10 0 0 1 10 10v70a10 10 0 0 0 10 10"></path>
                    <path d="M125 151a10 10 0 0 0 10 -10v-100a10 10 0 0 1 10 -10"></path>
                    <g class="terminal ">
                        <path d="M145 31h0"></path>
                        <path d="M173.5 31h0"></path>
                        <rect x="145" y="20" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="159.25" y="35">１</text>
                    </g>
                    <path d="M173.5 31a10 10 0 0 1 10 10v100a10 10 0 0 0 10 10"></path>
                    <path d="M125 151h20"></path>
                    <g class="terminal ">
                        <path d="M145 151h0"></path>
                        <path d="M173.5 151h0"></path>
                        <rect x="145" y="140" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="159.25" y="155">５</text>
                    </g>
                    <path d="M173.5 151h20"></path>
                    <path d="M125 151a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
                    <g class="terminal ">
                        <path d="M145 181h0"></path>
                        <path d="M173.5 181h0"></path>
                        <rect x="145" y="170" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="159.25" y="185">６</text>
                    </g>
                    <path d="M173.5 181a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
                    <path d="M125 151a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path>
                    <g class="terminal ">
                        <path d="M145 211h0"></path>
                        <path d="M173.5 211h0"></path>
                        <rect x="145" y="200" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="159.25" y="215">７</text>
                    </g>
                    <path d="M173.5 211a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path>
                    <path d="M125 151a10 10 0 0 1 10 10v70a10 10 0 0 0 10 10"></path>
                    <g class="terminal ">
                        <path d="M145 241h0"></path>
                        <path d="M173.5 241h0"></path>
                        <rect x="145" y="230" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="159.25" y="245">８</text>
                    </g>
                    <path d="M173.5 241a10 10 0 0 0 10 -10v-70a10 10 0 0 1 10 -10"></path>
                    <path d="M125 151a10 10 0 0 1 10 10v100a10 10 0 0 0 10 10"></path>
                    <g class="terminal ">
                        <path d="M145 271h0"></path>
                        <path d="M173.5 271h0"></path>
                        <rect x="145" y="260" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="159.25" y="275">９</text>
                    </g>
                    <path d="M173.5 271a10 10 0 0 0 10 -10v-100a10 10 0 0 1 10 -10"></path>
                </g>
                <g>
                    <path d="M193.5 151h0"></path>
                    <path d="M262 151h0"></path>
                    <path d="M193.5 151a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
                    <g class="terminal ">
                        <path d="M213.5 121h0"></path>
                        <path d="M242 121h0"></path>
                        <rect x="213.5" y="110" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="227.75" y="125">四</text>
                    </g>
                    <path d="M242 121a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
                    <path d="M193.5 151a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path>
                    <g class="terminal ">
                        <path d="M213.5 91h0"></path>
                        <path d="M242 91h0"></path>
                        <rect x="213.5" y="80" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="227.75" y="95">三</text>
                    </g>
                    <path d="M242 91a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path>
                    <path d="M193.5 151a10 10 0 0 0 10 -10v-70a10 10 0 0 1 10 -10"></path>
                    <g class="terminal ">
                        <path d="M213.5 61h0"></path>
                        <path d="M242 61h0"></path>
                        <rect x="213.5" y="50" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="227.75" y="65">二</text>
                    </g>
                    <path d="M242 61a10 10 0 0 1 10 10v70a10 10 0 0 0 10 10"></path>
                    <path d="M193.5 151a10 10 0 0 0 10 -10v-100a10 10 0 0 1 10 -10"></path>
                    <g class="terminal ">
                        <path d="M213.5 31h0"></path>
                        <path d="M242 31h0"></path>
                        <rect x="213.5" y="20" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="227.75" y="35">一</text>
                    </g>
                    <path d="M242 31a10 10 0 0 1 10 10v100a10 10 0 0 0 10 10"></path>
                    <path d="M193.5 151h20"></path>
                    <g class="terminal ">
                        <path d="M213.5 151h0"></path>
                        <path d="M242 151h0"></path>
                        <rect x="213.5" y="140" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="227.75" y="155">五</text>
                    </g>
                    <path d="M242 151h20"></path>
                    <path d="M193.5 151a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
                    <g class="terminal ">
                        <path d="M213.5 181h0"></path>
                        <path d="M242 181h0"></path>
                        <rect x="213.5" y="170" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="227.75" y="185">六</text>
                    </g>
                    <path d="M242 181a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
                    <path d="M193.5 151a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path>
                    <g class="terminal ">
                        <path d="M213.5 211h0"></path>
                        <path d="M242 211h0"></path>
                        <rect x="213.5" y="200" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="227.75" y="215">七</text>
                    </g>
                    <path d="M242 211a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path>
                    <path d="M193.5 151a10 10 0 0 1 10 10v70a10 10 0 0 0 10 10"></path>
                    <g class="terminal ">
                        <path d="M213.5 241h0"></path>
                        <path d="M242 241h0"></path>
                        <rect x="213.5" y="230" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="227.75" y="245">八</text>
                    </g>
                    <path d="M242 241a10 10 0 0 0 10 -10v-70a10 10 0 0 1 10 -10"></path>
                    <path d="M193.5 151a10 10 0 0 1 10 10v100a10 10 0 0 0 10 10"></path>
                    <g class="terminal ">
                        <path d="M213.5 271h0"></path>
                        <path d="M242 271h0"></path>
                        <rect x="213.5" y="260" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="227.75" y="275">九</text>
                    </g>
                    <path d="M242 271a10 10 0 0 0 10 -10v-100a10 10 0 0 1 10 -10"></path>
                </g>
            </g>
            <path d="M262 151h20"></path>
            <path d="M105 151a10 10 0 0 1 10 10v130a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M125 301h54.25"></path>
                <path d="M207.75 301h54.25"></path>
                <rect x="179.25" y="290" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="193.5" y="305">同</text>
            </g>
            <path d="M262 301a10 10 0 0 0 10 -10v-130a10 10 0 0 1 10 -10"></path>
        </g>
        <g>
            <path d="M282 151h0"></path>
            <path d="M467.5 151h0"></path>
            <path d="M282 151a10 10 0 0 0 10 -10v-89a10 10 0 0 1 10 -10h58.5"></path>
            <path d="M380.5 260h67a10 10 0 0 0 10 -10v-89a10 10 0 0 1 10 -10"></path>
            <path d="M282 151h10"></path>
            <g>
                <path d="M292 151h0"></path>
                <path d="M360.5 151h0"></path>
                <path d="M292 151a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
                <g class="terminal ">
                    <path d="M312 121h0"></path>
                    <path d="M340.5 121h0"></path>
                    <rect x="312" y="110" width="28.5" height="22" rx="10" ry="10"></rect>
                    <text x="326.25" y="125">桂</text>
                </g>
                <path d="M340.5 121a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
                <path d="M292 151a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path>
                <g class="terminal ">
                    <path d="M312 91h0"></path>
                    <path d="M340.5 91h0"></path>
                    <rect x="312" y="80" width="28.5" height="22" rx="10" ry="10"></rect>
                    <text x="326.25" y="95">香</text>
                </g>
                <path d="M340.5 91a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path>
                <path d="M292 151a10 10 0 0 0 10 -10v-70a10 10 0 0 1 10 -10"></path>
                <g class="terminal ">
                    <path d="M312 61h0"></path>
                    <path d="M340.5 61h0"></path>
                    <rect x="312" y="50" width="28.5" height="22" rx="10" ry="10"></rect>
                    <text x="326.25" y="65">歩</text>
                </g>
                <path d="M340.5 61a10 10 0 0 1 10 10v70a10 10 0 0 0 10 10"></path>
                <path d="M292 151h20"></path>
                <g class="terminal ">
                    <path d="M312 151h0"></path>
                    <path d="M340.5 151h0"></path>
                    <rect x="312" y="140" width="28.5" height="22" rx="10" ry="10"></rect>
                    <text x="326.25" y="155">銀</text>
                </g>
                <path d="M340.5 151h20"></path>
                <path d="M292 151a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
                <g class="terminal ">
                    <path d="M312 181h0"></path>
                    <path d="M340.5 181h0"></path>
                    <rect x="312" y="170" width="28.5" height="22" rx="10" ry="10"></rect>
                    <text x="326.25" y="185">金</text>
                </g>
                <path d="M340.5 181a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
                <path d="M292 151a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path>
                <g class="terminal ">
                    <path d="M312 211h0"></path>
                    <path d="M340.5 211h0"></path>
                    <rect x="312" y="200" width="28.5" height="22" rx="10" ry="10"></rect>
                    <text x="326.25" y="215">角</text>
                </g>
                <path d="M340.5 211a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path>
                <path d="M292 151a10 10 0 0 1 10 10v70a10 10 0 0 0 10 10"></path>
                <g class="terminal ">
                    <path d="M312 241h0"></path>
                    <path d="M340.5 241h0"></path>
                    <rect x="312" y="230" width="28.5" height="22" rx="10" ry="10"></rect>
                    <text x="326.25" y="245">飛</text>
                </g>
                <path d="M340.5 241a10 10 0 0 0 10 -10v-70a10 10 0 0 1 10 -10"></path>
                <path d="M292 151a10 10 0 0 1 10 10v100a10 10 0 0 0 10 10"></path>
                <g class="terminal ">
                    <path d="M312 271h0"></path>
                    <path d="M340.5 271h0"></path>
                    <rect x="312" y="260" width="28.5" height="22" rx="10" ry="10"></rect>
                    <text x="326.25" y="275">玉</text>
                </g>
                <path d="M340.5 271a10 10 0 0 0 10 -10v-100a10 10 0 0 1 10 -10"></path>
            </g>
            <path d="M360.5 151a10 10 0 0 1 10 10v89a10 10 0 0 0 10 10"></path>
            <path d="M360.5 42a10 10 0 0 1 10 10v89a10 10 0 0 0 10 10"></path>
            <g>
                <path d="M380.5 151h0"></path>
                <path d="M457.5 151h0"></path>
                <path d="M380.5 151a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
                <g class="terminal ">
                    <path d="M400.5 121h0"></path>
                    <path d="M437.5 121h0"></path>
                    <rect x="400.5" y="110" width="37" height="22" rx="10" ry="10"></rect>
                    <text x="419" y="125">成香</text>
                </g>
                <path d="M437.5 121a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
                <path d="M380.5 151a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path>
                <g class="terminal ">
                    <path d="M400.5 91h4.25"></path>
                    <path d="M433.25 91h4.25"></path>
                    <rect x="404.75" y="80" width="28.5" height="22" rx="10" ry="10"></rect>
                    <text x="419" y="95">と</text>
                </g>
                <path d="M437.5 91a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path>
                <path d="M380.5 151h20"></path>
                <g class="terminal ">
                    <path d="M400.5 151h0"></path>
                    <path d="M437.5 151h0"></path>
                    <rect x="400.5" y="140" width="37" height="22" rx="10" ry="10"></rect>
                    <text x="419" y="155">成桂</text>
                </g>
                <path d="M437.5 151h20"></path>
                <path d="M380.5 151a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
                <g class="terminal ">
                    <path d="M400.5 181h0"></path>
                    <path d="M437.5 181h0"></path>
                    <rect x="400.5" y="170" width="37" height="22" rx="10" ry="10"></rect>
                    <text x="419" y="185">成銀</text>
                </g>
                <path d="M437.5 181a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
                <path d="M380.5 151a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path>
                <g class="terminal ">
                    <path d="M400.5 211h4.25"></path>
                    <path d="M433.25 211h4.25"></path>
                    <rect x="404.75" y="200" width="28.5" height="22" rx="10" ry="10"></rect>
                    <text x="419" y="215">馬</text>
                </g>
                <path d="M437.5 211a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path>
                <path d="M380.5 151a10 10 0 0 1 10 10v70a10 10 0 0 0 10 10"></path>
                <g class="terminal ">
                    <path d="M400.5 241h4.25"></path>
                    <path d="M433.25 241h4.25"></path>
                    <rect x="404.75" y="230" width="28.5" height="22" rx="10" ry="10"></rect>
                    <text x="419" y="245">竜</text>
                </g>
                <path d="M437.5 241a10 10 0 0 0 10 -10v-70a10 10 0 0 1 10 -10"></path>
            </g>
            <path d="M457.5 151h10"></path>
        </g>
        <g>
            <path d="M467.5 151h0"></path>
            <path d="M536 151h0"></path>
            <path d="M467.5 151h20"></path>
            <g>
                <path d="M487.5 151h28.5"></path>
            </g>
            <path d="M516 151h20"></path>
            <path d="M467.5 151a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M487.5 171h0"></path>
                <path d="M516 171h0"></path>
                <rect x="487.5" y="160" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="501.75" y="175">右</text>
            </g>
            <path d="M516 171a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path>
            <path d="M467.5 151a10 10 0 0 1 10 10v30a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M487.5 201h0"></path>
                <path d="M516 201h0"></path>
                <rect x="487.5" y="190" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="501.75" y="205">直</text>
            </g>
            <path d="M516 201a10 10 0 0 0 10 -10v-30a10 10 0 0 1 10 -10"></path>
            <path d="M467.5 151a10 10 0 0 1 10 10v60a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M487.5 231h0"></path>
                <path d="M516 231h0"></path>
                <rect x="487.5" y="220" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="501.75" y="235">左</text>
            </g>
            <path d="M516 231a10 10 0 0 0 10 -10v-60a10 10 0 0 1 10 -10"></path>
        </g>
        <g>
            <path d="M536 151h0"></path>
            <path d="M604.5 151h0"></path>
            <path d="M536 151h20"></path>
            <g>
                <path d="M556 151h28.5"></path>
            </g>
            <path d="M584.5 151h20"></path>
            <path d="M536 151a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M556 171h0"></path>
                <path d="M584.5 171h0"></path>
                <rect x="556" y="160" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="570.25" y="175">上</text>
            </g>
            <path d="M584.5 171a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path>
            <path d="M536 151a10 10 0 0 1 10 10v30a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M556 201h0"></path>
                <path d="M584.5 201h0"></path>
                <rect x="556" y="190" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="570.25" y="205">寄</text>
            </g>
            <path d="M584.5 201a10 10 0 0 0 10 -10v-30a10 10 0 0 1 10 -10"></path>
            <path d="M536 151a10 10 0 0 1 10 10v60a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M556 231h0"></path>
                <path d="M584.5 231h0"></path>
                <rect x="556" y="220" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="570.25" y="235">引</text>
            </g>
            <path d="M584.5 231a10 10 0 0 0 10 -10v-60a10 10 0 0 1 10 -10"></path>
        </g>
        <g>
            <path d="M604.5 151h0"></path>
            <path d="M681.5 151h0"></path>
            <path d="M604.5 151h20"></path>
            <g>
                <path d="M624.5 151h37"></path>
            </g>
            <path d="M661.5 151h20"></path>
            <path d="M604.5 151a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M624.5 171h4.25"></path>
                <path d="M657.25 171h4.25"></path>
                <rect x="628.75" y="160" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="643" y="175">成</text>
            </g>
            <path d="M661.5 171a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path>
            <path d="M604.5 151a10 10 0 0 1 10 10v30a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M624.5 201h0"></path>
                <path d="M661.5 201h0"></path>
                <rect x="624.5" y="190" width="37" height="22" rx="10" ry="10"></rect>
                <text x="643" y="205">不成</text>
            </g>
            <path d="M661.5 201a10 10 0 0 0 10 -10v-30a10 10 0 0 1 10 -10"></path>
            <path d="M604.5 151a10 10 0 0 1 10 10v60a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M624.5 231h4.25"></path>
                <path d="M657.25 231h4.25"></path>
                <rect x="628.75" y="220" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="643" y="235">打</text>
            </g>
            <path d="M661.5 231a10 10 0 0 0 10 -10v-60a10 10 0 0 1 10 -10"></path>
        </g>
        <path d="M 681.5 151 h 20 m -10 -10 v 20 m 10 -20 v 20"></path>
    </g>
    <style>
        svg {
            background-color: hsl(30,20%,95%);
        }
        path {
            stroke-width: 3;
            stroke: black;
            fill: rgba(0,0,0,0);
        }
        text {
            font: bold 14px monospace;
            text-anchor: middle;
            white-space: pre;
        }
        text.diagram-text {
            font-size: 12px;
        }
        text.diagram-arrow {
            font-size: 16px;
        }
        text.label {
            text-anchor: start;
        }
        text.comment {
            font: italic 12px monospace;
        }
        g.non-terminal text {
        /&#42;font-style: italic;&#42;/
        }
        rect {
            stroke-width: 3;
            stroke: black;
            fill: hsl(120,100%,90%);
        }
        rect.group-box {
            stroke: gray;
            stroke-dasharray: 10 5;
            fill: none;
        }
        path.diagram-text {
            stroke-width: 3;
            stroke: black;
            fill: white;
            cursor: help;
        }
        g.diagram-text:hover path.diagram-text {
            fill: #eee;
        }</style>
</svg>

<p>代わりにこんな感じで打ってみて下さい(厳密にこの文法通りに解釈されるわけではありません)：</p>
<svg class="railroad-diagram" width="800.5" height="332" viewBox="0 0 800.5 332" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g transform="translate(.5 .5)">
        <g>
            <path d="M20 141v20m10 -20v20m-10 -10h20"></path>
        </g>
        <path d="M40 151h10"></path>
        <g class="comment ">
            <path d="M50 151h0"></path>
            <path d="M123 151h0"></path>
            <text x="86.5" y="156" class="comment">  指し手略記  </text>
        </g>
        <path d="M123 151h10"></path>
        <g>
            <path d="M133 151h0"></path>
            <path d="M310 151h0"></path>
            <path d="M133 151h20"></path>
            <g>
                <path d="M153 151h0"></path>
                <path d="M290 151h0"></path>
                <g>
                    <path d="M153 151h0"></path>
                    <path d="M221.5 151h0"></path>
                    <path d="M153 151a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
                    <g class="terminal ">
                        <path d="M173 121h0"></path>
                        <path d="M201.5 121h0"></path>
                        <rect x="173" y="110" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="187.25" y="125">4</text>
                    </g>
                    <path d="M201.5 121a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
                    <path d="M153 151a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path>
                    <g class="terminal ">
                        <path d="M173 91h0"></path>
                        <path d="M201.5 91h0"></path>
                        <rect x="173" y="80" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="187.25" y="95">3</text>
                    </g>
                    <path d="M201.5 91a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path>
                    <path d="M153 151a10 10 0 0 0 10 -10v-70a10 10 0 0 1 10 -10"></path>
                    <g class="terminal ">
                        <path d="M173 61h0"></path>
                        <path d="M201.5 61h0"></path>
                        <rect x="173" y="50" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="187.25" y="65">2</text>
                    </g>
                    <path d="M201.5 61a10 10 0 0 1 10 10v70a10 10 0 0 0 10 10"></path>
                    <path d="M153 151a10 10 0 0 0 10 -10v-100a10 10 0 0 1 10 -10"></path>
                    <g class="terminal ">
                        <path d="M173 31h0"></path>
                        <path d="M201.5 31h0"></path>
                        <rect x="173" y="20" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="187.25" y="35">1</text>
                    </g>
                    <path d="M201.5 31a10 10 0 0 1 10 10v100a10 10 0 0 0 10 10"></path>
                    <path d="M153 151h20"></path>
                    <g class="terminal ">
                        <path d="M173 151h0"></path>
                        <path d="M201.5 151h0"></path>
                        <rect x="173" y="140" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="187.25" y="155">5</text>
                    </g>
                    <path d="M201.5 151h20"></path>
                    <path d="M153 151a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
                    <g class="terminal ">
                        <path d="M173 181h0"></path>
                        <path d="M201.5 181h0"></path>
                        <rect x="173" y="170" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="187.25" y="185">6</text>
                    </g>
                    <path d="M201.5 181a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
                    <path d="M153 151a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path>
                    <g class="terminal ">
                        <path d="M173 211h0"></path>
                        <path d="M201.5 211h0"></path>
                        <rect x="173" y="200" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="187.25" y="215">7</text>
                    </g>
                    <path d="M201.5 211a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path>
                    <path d="M153 151a10 10 0 0 1 10 10v70a10 10 0 0 0 10 10"></path>
                    <g class="terminal ">
                        <path d="M173 241h0"></path>
                        <path d="M201.5 241h0"></path>
                        <rect x="173" y="230" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="187.25" y="245">8</text>
                    </g>
                    <path d="M201.5 241a10 10 0 0 0 10 -10v-70a10 10 0 0 1 10 -10"></path>
                    <path d="M153 151a10 10 0 0 1 10 10v100a10 10 0 0 0 10 10"></path>
                    <g class="terminal ">
                        <path d="M173 271h0"></path>
                        <path d="M201.5 271h0"></path>
                        <rect x="173" y="260" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="187.25" y="275">9</text>
                    </g>
                    <path d="M201.5 271a10 10 0 0 0 10 -10v-100a10 10 0 0 1 10 -10"></path>
                </g>
                <g>
                    <path d="M221.5 151h0"></path>
                    <path d="M290 151h0"></path>
                    <path d="M221.5 151a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
                    <g class="terminal ">
                        <path d="M241.5 121h0"></path>
                        <path d="M270 121h0"></path>
                        <rect x="241.5" y="110" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="255.75" y="125">4</text>
                    </g>
                    <path d="M270 121a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
                    <path d="M221.5 151a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path>
                    <g class="terminal ">
                        <path d="M241.5 91h0"></path>
                        <path d="M270 91h0"></path>
                        <rect x="241.5" y="80" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="255.75" y="95">3</text>
                    </g>
                    <path d="M270 91a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path>
                    <path d="M221.5 151a10 10 0 0 0 10 -10v-70a10 10 0 0 1 10 -10"></path>
                    <g class="terminal ">
                        <path d="M241.5 61h0"></path>
                        <path d="M270 61h0"></path>
                        <rect x="241.5" y="50" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="255.75" y="65">2</text>
                    </g>
                    <path d="M270 61a10 10 0 0 1 10 10v70a10 10 0 0 0 10 10"></path>
                    <path d="M221.5 151a10 10 0 0 0 10 -10v-100a10 10 0 0 1 10 -10"></path>
                    <g class="terminal ">
                        <path d="M241.5 31h0"></path>
                        <path d="M270 31h0"></path>
                        <rect x="241.5" y="20" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="255.75" y="35">1</text>
                    </g>
                    <path d="M270 31a10 10 0 0 1 10 10v100a10 10 0 0 0 10 10"></path>
                    <path d="M221.5 151h20"></path>
                    <g class="terminal ">
                        <path d="M241.5 151h0"></path>
                        <path d="M270 151h0"></path>
                        <rect x="241.5" y="140" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="255.75" y="155">5</text>
                    </g>
                    <path d="M270 151h20"></path>
                    <path d="M221.5 151a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
                    <g class="terminal ">
                        <path d="M241.5 181h0"></path>
                        <path d="M270 181h0"></path>
                        <rect x="241.5" y="170" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="255.75" y="185">6</text>
                    </g>
                    <path d="M270 181a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
                    <path d="M221.5 151a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path>
                    <g class="terminal ">
                        <path d="M241.5 211h0"></path>
                        <path d="M270 211h0"></path>
                        <rect x="241.5" y="200" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="255.75" y="215">7</text>
                    </g>
                    <path d="M270 211a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path>
                    <path d="M221.5 151a10 10 0 0 1 10 10v70a10 10 0 0 0 10 10"></path>
                    <g class="terminal ">
                        <path d="M241.5 241h0"></path>
                        <path d="M270 241h0"></path>
                        <rect x="241.5" y="230" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="255.75" y="245">8</text>
                    </g>
                    <path d="M270 241a10 10 0 0 0 10 -10v-70a10 10 0 0 1 10 -10"></path>
                    <path d="M221.5 151a10 10 0 0 1 10 10v100a10 10 0 0 0 10 10"></path>
                    <g class="terminal ">
                        <path d="M241.5 271h0"></path>
                        <path d="M270 271h0"></path>
                        <rect x="241.5" y="260" width="28.5" height="22" rx="10" ry="10"></rect>
                        <text x="255.75" y="275">9</text>
                    </g>
                    <path d="M270 271a10 10 0 0 0 10 -10v-100a10 10 0 0 1 10 -10"></path>
                </g>
            </g>
            <path d="M290 151h20"></path>
            <path d="M133 151a10 10 0 0 1 10 10v130a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M153 301h54.25"></path>
                <path d="M235.75 301h54.25"></path>
                <rect x="207.25" y="290" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="221.5" y="305">x</text>
            </g>
            <path d="M290 301a10 10 0 0 0 10 -10v-130a10 10 0 0 1 10 -10"></path>
        </g>
        <g>
            <path d="M310 151h0"></path>
            <path d="M538 151h0"></path>
            <path d="M310 151a10 10 0 0 0 10 -10v-89a10 10 0 0 1 10 -10h84"></path>
            <path d="M434 260h84a10 10 0 0 0 10 -10v-89a10 10 0 0 1 10 -10"></path>
            <path d="M310 151h10"></path>
            <g>
                <path d="M320 151h0"></path>
                <path d="M414 151h0"></path>
                <path d="M320 151a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
                <g class="terminal ">
                    <path d="M340 121h8.5"></path>
                    <path d="M385.5 121h8.5"></path>
                    <rect x="348.5" y="110" width="37" height="22" rx="10" ry="10"></rect>
                    <text x="367" y="125">KE</text>
                </g>
                <path d="M394 121a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
                <path d="M320 151a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path>
                <g class="terminal ">
                    <path d="M340 91h8.5"></path>
                    <path d="M385.5 91h8.5"></path>
                    <rect x="348.5" y="80" width="37" height="22" rx="10" ry="10"></rect>
                    <text x="367" y="95">KY</text>
                </g>
                <path d="M394 91a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path>
                <path d="M320 151a10 10 0 0 0 10 -10v-70a10 10 0 0 1 10 -10"></path>
                <g class="terminal ">
                    <path d="M340 61h0"></path>
                    <path d="M394 61h0"></path>
                    <rect x="340" y="50" width="54" height="22" rx="10" ry="10"></rect>
                    <text x="367" y="65">F(U)</text>
                </g>
                <path d="M394 61a10 10 0 0 1 10 10v70a10 10 0 0 0 10 10"></path>
                <path d="M320 151h20"></path>
                <g class="terminal ">
                    <path d="M340 151h0"></path>
                    <path d="M394 151h0"></path>
                    <rect x="340" y="140" width="54" height="22" rx="10" ry="10"></rect>
                    <text x="367" y="155">G(I)</text>
                </g>
                <path d="M394 151h20"></path>
                <path d="M320 151a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
                <g class="terminal ">
                    <path d="M340 181h8.5"></path>
                    <path d="M385.5 181h8.5"></path>
                    <rect x="348.5" y="170" width="37" height="22" rx="10" ry="10"></rect>
                    <text x="367" y="185">KI</text>
                </g>
                <path d="M394 181a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
                <path d="M320 151a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path>
                <g class="terminal ">
                    <path d="M340 211h8.5"></path>
                    <path d="M385.5 211h8.5"></path>
                    <rect x="348.5" y="200" width="37" height="22" rx="10" ry="10"></rect>
                    <text x="367" y="215">KA</text>
                </g>
                <path d="M394 211a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path>
                <path d="M320 151a10 10 0 0 1 10 10v70a10 10 0 0 0 10 10"></path>
                <g class="terminal ">
                    <path d="M340 241h0"></path>
                    <path d="M394 241h0"></path>
                    <rect x="340" y="230" width="54" height="22" rx="10" ry="10"></rect>
                    <text x="367" y="245">H(I)</text>
                </g>
                <path d="M394 241a10 10 0 0 0 10 -10v-70a10 10 0 0 1 10 -10"></path>
                <path d="M320 151a10 10 0 0 1 10 10v100a10 10 0 0 0 10 10"></path>
                <g class="terminal ">
                    <path d="M340 271h0"></path>
                    <path d="M394 271h0"></path>
                    <rect x="340" y="260" width="54" height="22" rx="10" ry="10"></rect>
                    <text x="367" y="275">O(U)</text>
                </g>
                <path d="M394 271a10 10 0 0 0 10 -10v-100a10 10 0 0 1 10 -10"></path>
            </g>
            <path d="M414 151a10 10 0 0 1 10 10v89a10 10 0 0 0 10 10"></path>
            <path d="M414 42a10 10 0 0 1 10 10v89a10 10 0 0 0 10 10"></path>
            <g>
                <path d="M434 151h0"></path>
                <path d="M528 151h0"></path>
                <path d="M434 151a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
                <g class="terminal ">
                    <path d="M454 121h8.5"></path>
                    <path d="M499.5 121h8.5"></path>
                    <rect x="462.5" y="110" width="37" height="22" rx="10" ry="10"></rect>
                    <text x="481" y="125">NY</text>
                </g>
                <path d="M508 121a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
                <path d="M434 151a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path>
                <g class="terminal ">
                    <path d="M454 91h0"></path>
                    <path d="M508 91h0"></path>
                    <rect x="454" y="80" width="54" height="22" rx="10" ry="10"></rect>
                    <text x="481" y="95">T(O)</text>
                </g>
                <path d="M508 91a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path>
                <path d="M434 151h20"></path>
                <g class="terminal ">
                    <path d="M454 151h8.5"></path>
                    <path d="M499.5 151h8.5"></path>
                    <rect x="462.5" y="140" width="37" height="22" rx="10" ry="10"></rect>
                    <text x="481" y="155">NK</text>
                </g>
                <path d="M508 151h20"></path>
                <path d="M434 151a10 10 0 0 1 10 10v10a10 10 0 0 0 10 10"></path>
                <g class="terminal ">
                    <path d="M454 181h8.5"></path>
                    <path d="M499.5 181h8.5"></path>
                    <rect x="462.5" y="170" width="37" height="22" rx="10" ry="10"></rect>
                    <text x="481" y="185">NG</text>
                </g>
                <path d="M508 181a10 10 0 0 0 10 -10v-10a10 10 0 0 1 10 -10"></path>
                <path d="M434 151a10 10 0 0 1 10 10v40a10 10 0 0 0 10 10"></path>
                <g class="terminal ">
                    <path d="M454 211h0"></path>
                    <path d="M508 211h0"></path>
                    <rect x="454" y="200" width="54" height="22" rx="10" ry="10"></rect>
                    <text x="481" y="215">U(M)</text>
                </g>
                <path d="M508 211a10 10 0 0 0 10 -10v-40a10 10 0 0 1 10 -10"></path>
                <path d="M434 151a10 10 0 0 1 10 10v70a10 10 0 0 0 10 10"></path>
                <g class="terminal ">
                    <path d="M454 241h0"></path>
                    <path d="M508 241h0"></path>
                    <rect x="454" y="230" width="54" height="22" rx="10" ry="10"></rect>
                    <text x="481" y="245">R(Y)</text>
                </g>
                <path d="M508 241a10 10 0 0 0 10 -10v-70a10 10 0 0 1 10 -10"></path>
            </g>
            <path d="M528 151h10"></path>
        </g>
        <g>
            <path d="M538 151h0"></path>
            <path d="M606.5 151h0"></path>
            <path d="M538 151h20"></path>
            <g>
                <path d="M558 151h28.5"></path>
            </g>
            <path d="M586.5 151h20"></path>
            <path d="M538 151a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M558 171h0"></path>
                <path d="M586.5 171h0"></path>
                <rect x="558" y="160" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="572.25" y="175">R</text>
            </g>
            <path d="M586.5 171a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path>
            <path d="M538 151a10 10 0 0 1 10 10v30a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M558 201h0"></path>
                <path d="M586.5 201h0"></path>
                <rect x="558" y="190" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="572.25" y="205">C</text>
            </g>
            <path d="M586.5 201a10 10 0 0 0 10 -10v-30a10 10 0 0 1 10 -10"></path>
            <path d="M538 151a10 10 0 0 1 10 10v60a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M558 231h0"></path>
                <path d="M586.5 231h0"></path>
                <rect x="558" y="220" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="572.25" y="235">L</text>
            </g>
            <path d="M586.5 231a10 10 0 0 0 10 -10v-60a10 10 0 0 1 10 -10"></path>
        </g>
        <g>
            <path d="M606.5 151h0"></path>
            <path d="M675 151h0"></path>
            <path d="M606.5 151h20"></path>
            <g>
                <path d="M626.5 151h28.5"></path>
            </g>
            <path d="M655 151h20"></path>
            <path d="M606.5 151a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M626.5 171h0"></path>
                <path d="M655 171h0"></path>
                <rect x="626.5" y="160" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="640.75" y="175">A</text>
            </g>
            <path d="M655 171a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path>
            <path d="M606.5 151a10 10 0 0 1 10 10v30a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M626.5 201h0"></path>
                <path d="M655 201h0"></path>
                <rect x="626.5" y="190" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="640.75" y="205">Y</text>
            </g>
            <path d="M655 201a10 10 0 0 0 10 -10v-30a10 10 0 0 1 10 -10"></path>
            <path d="M606.5 151a10 10 0 0 1 10 10v60a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M626.5 231h0"></path>
                <path d="M655 231h0"></path>
                <rect x="626.5" y="220" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="640.75" y="235">H</text>
            </g>
            <path d="M655 231a10 10 0 0 0 10 -10v-60a10 10 0 0 1 10 -10"></path>
        </g>
        <g>
            <path d="M675 151h0"></path>
            <path d="M760.5 151h0"></path>
            <path d="M675 151h20"></path>
            <g>
                <path d="M695 151h45.5"></path>
            </g>
            <path d="M740.5 151h20"></path>
            <path d="M675 151a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M695 171h0"></path>
                <path d="M740.5 171h0"></path>
                <rect x="695" y="160" width="45.5" height="22" rx="10" ry="10"></rect>
                <text x="717.75" y="175">+/N</text>
            </g>
            <path d="M740.5 171a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path>
            <path d="M675 151a10 10 0 0 1 10 10v30a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M695 201h8.5"></path>
                <path d="M732 201h8.5"></path>
                <rect x="703.5" y="190" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="717.75" y="205">-</text>
            </g>
            <path d="M740.5 201a10 10 0 0 0 10 -10v-30a10 10 0 0 1 10 -10"></path>
            <path d="M675 151a10 10 0 0 1 10 10v60a10 10 0 0 0 10 10"></path>
            <g class="terminal ">
                <path d="M695 231h8.5"></path>
                <path d="M732 231h8.5"></path>
                <rect x="703.5" y="220" width="28.5" height="22" rx="10" ry="10"></rect>
                <text x="717.75" y="235">D</text>
            </g>
            <path d="M740.5 231a10 10 0 0 0 10 -10v-60a10 10 0 0 1 10 -10"></path>
        </g>
        <path d="M 760.5 151 h 20 m -10 -10 v 20 m 10 -20 v 20"></path>
    </g>
    <style>
        svg {
            background-color: hsl(30,20%,95%);
        }
        path {
            stroke-width: 3;
            stroke: black;
            fill: rgba(0,0,0,0);
        }
        text {
            font: bold 14px monospace;
            text-anchor: middle;
            white-space: pre;
        }
        text.diagram-text {
            font-size: 12px;
        }
        text.diagram-arrow {
            font-size: 16px;
        }
        text.label {
            text-anchor: start;
        }
        text.comment {
            font: italic 12px monospace;
        }
        g.non-terminal text {
        /&#42;font-style: italic;&#42;/
        }
        rect {
            stroke-width: 3;
            stroke: black;
            fill: hsl(120,100%,90%);
        }
        rect.group-box {
            stroke: gray;
            stroke-dasharray: 10 5;
            fill: none;
        }
        path.diagram-text {
            stroke-width: 3;
            stroke: black;
            fill: white;
            cursor: help;
        }
        g.diagram-text:hover path.diagram-text {
            fill: #eee;
        }</style>
</svg>
<p>
    ☗☖は自動的に付きます。指し手の直前に\を入れることで反転できます。
</p>
<script src="./index.js"></script>
</body>

</html>
